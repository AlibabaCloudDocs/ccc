IVR将来电转接到指定坐席 
==================================

常规情况下，IVR流程中的转人工模块用于将呼入来电转入到技能组中，呼叫中心系统会智能化的分配给技能组内的坐席人员。特殊情况下，可能您需要将某些特定的来电呼入直接分配给某个坐席人员，就会用到这里所要介绍的功能。

常规情况下，IVR流程中的转人工模块用于将呼入来电转入到技能组中，呼叫中心系统会智能化的分配给技能组内的坐席人员。特殊情况下，可能您需要将某些特定的来电呼入直接分配给某个坐席人员，就会用到这里所要介绍的功能。

使用方式概览：

* 获取坐席的userName

  

* 在IVR流程开始模块中设置自定义参数或者通过函数设置自定义参数

  

* 转人工模块中选择对应的自定义参数

  




一、获取坐席的userName 
---------------------------------

坐席的userName通常为如下形式： **1059803544828509@XXX** ，格式为：ramId@呼叫中心访问地址，所以我们要获取到坐席对应的`ramId`和`呼叫中心访问地址`。

手动查询ramId 
---------------------------

1. 使用阿里云主账号登录 [访问控制RAM控制台-用户管理](https://ram.console.aliyun.com/#/user/list) 。

   

2. 登录后，可以看到当前阿里云账号内所有的子用户（坐席），点击对应子用户右侧的 **管理** 。![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9927978161/p261005.png)

   

3. 子用户详情中的UID，即为我们所需的ramId，如下图所示：![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9927978161/p261006.png)

   




通过调用API获取ramId 
--------------------------------

您可以通过 [ListUsers](https://help.aliyun.com/document_detail/63052.html) 或者 [GetUser](https://help.aliyun.com/document_detail/63051.html) 来获取坐席的ramId，详情请查看对应的文档介绍。

获取呼叫中心的访问地址 
-----------------------------

通常完整的呼叫中心访问地址格式为：https://ccc.aliyun.com/workbench/XXX ，其中最后的 **XXX** 为您创建呼叫中心时输入的访问地址，也就是我们所需要的访问地址。可以到 [呼叫中心控制台-实例管理](https://ccc.console.aliyun.com/AccInstance)v2 查看，如下图所示，红框中的 **testLimit** 就是我们所需的访问地址。

![1](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9927978161/p263976.png)

二、将坐席的userName设置为IVR流程中的自定义参数 
-----------------------------------------------

这里有两种方式，一种是比较简单的直接在开始模块中去定义自定义参数，另一种是更加灵活的通过 [函数模块](https://help.aliyun.com/document_detail/60201.html) 返回所需的坐席userName，赋值到一个自定义参数上。

1.在开始模块中设置自定义参数 
---------------------------------

直接编辑开始模块，进行定义即可，如下图所示：

![2](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9927978161/p263979.png)

2.借助函数模块来灵活的设置自定义参数 
-------------------------------------

上面直接在开始模块中定义的方式是固定的方式，无法灵活的修改。借助函数模块，通过您的服务端或者函数计算服务进行一定的逻辑判断，灵活的返回的指定坐席的userName，最终通过函数模块将返回值赋值到一个自定义参数上。

常见使用场景示例：

* 一些指定的高级别客户，直接由特定的服务专员接听电话。

  

* 将来电号码在自有数据库中匹配，查询到该来电号码归属于哪个服务专员，然后确定该服务专员空闲，则直接由该服务专员接听电话。（其实这里和我们的[熟人模式](~~75106~~)类似，但是熟人模式生效的必备条件是一定时间内产生过通话）

  




强调说明：通常来说，使用函数模块，说明您有一定的开发能力，那么在返回指定坐席的userName之前，建议您根据 [客服实时数据列表](~~70131~~) 查询一下指定坐席的状态是否处于空闲，因为只有空闲状态才能振铃接听电话。但是由于坐席状态在实时变化，还是有可能会发生来电转过去的一刹那指定坐席那边突然进线其他来电的可能。

具体函数模块的使用，这里就不再赘述，请查看 [函数模块使用示例](~~72494~~)。

三、转人工模块中选择对应的自定义参数![3](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9927978161/p263983.png) 
---------------------------------------------------------------------------------------------------------------------------------------

如上图所示，人工接听处选择指定坐席，然后选择对应的自定义参数。由于直接转坐席，相当于转到了坐席的个人队列，所以只要坐席在线，坐席的个人队列就是存在的，就不会失败。这方面存在些许不足，我们后期尽量优化为只有当坐席状态为空闲状态时，才可以转接成功，否则直接走转人工失败（超时）出口。
