来电弹屏 
=========================

来电弹屏，可以有效的解决与第三方客户管理系统的对接问题，当有客户来电或坐席主动呼出时，会自动调取第三方客户管理系统内的客户数据，展示给客服人员使用。

**来电弹屏** 

当坐席工作台响铃时，或者当坐席人员主动外呼时，云呼叫中心系统将以http get请求的方式调用第三方客户管理系统的url，并且将相关参数发送给第三方客户管理系统；同时我们以iframe嵌入的形式将第三方客户管理系统的页面显示在坐席工作台，上述的url即为iframe的页面地址，每当有新的呼入/呼出时，系统将自动刷新该iframe页面，以展示最新的客户信息。
**说明**

iframe是HTML标签，一般用来包含别的页面，例如我们可以在我们自己的网站页面加载别人网站或者本站其他页面的内容。

**一、来电弹屏如何配置** 

* 主账号登录阿里云控制台 [https://ccc.console.aliyun.com/](https://ccc.console.aliyun.com/ "阿里云控制台")，在呼叫中心实例列表中，点击对应的来电弹屏设置即可。![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9186754161/p244173.png)

  

* 在弹层中进行设置![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9186754161/p244174.png)

  * 第一列意为该弹屏页是否显示；

    
  
  * **页面名称** ：在坐席工作台中，该来电弹屏页面的标题名称;

    
  
  * **页面地址** ：第三方客户管理系统的url，url填写必须为 **完整的url** ，需要包括协议、主机名等，例如[https://www.crm.com；为了保证您的通话数据的安全性，我们的呼叫中心系统仅支持https协议方式登录，所以来电弹屏也\*\*仅支持https协议\*\*的url；](https://www.crm.com；为了保证您的通话数据的安全性，我们的呼叫中心系统仅支持https协议方式登录，所以来电弹屏也**仅支持https协议**的url；)

    
  
  * **设为首页** ：意为当坐席工作台登录上线时打开的弹屏页面，主要作用为登录第三方客户管理系统，在第一次呼入/呼出时，将自动弹出其他弹屏页面。

    
  

  

* 填写完毕，点击`确定`按钮提交即可。

  

* 注意点：

  * 每个呼叫中心实例最多配置五个来电弹屏页面；

    
  
  * **关闭** 状态的页面，不允许设置为首页；

    
  
  * 已经设置为首页的页面，如果将其关闭，那么将自动撤销首页状态，需要重新设置首页；

    
  
  * 重新配置保存成功后，坐席需要刷新页面方可显示最新的来电弹屏信息；

    
  

  




**二、来电弹屏如何使用** 

**以首页为阿里云，其他两个页面为淘宝和天猫为例** 

* 坐席人员登录坐席工作台，会直接弹出设置好的 **首页** 页面，此时并没有拼接相关参数，此时可以登录。![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9186754161/p244175.png)

  

* 当首次呼入/呼出时，将会弹出另外两个页面，并且url中携带了相关参数；同时首页也会携带相关参数刷新。![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9186754161/p244176.gif)

  

* 当通话结束后，如果此时需要录入通话信息等内容，此时记得点击 **`话后处理`** 按钮，否则15秒后将自动转为空闲状态，此时如果有新的来电，那么来电弹屏页面将自动刷新，之前的客户信息将丢失。![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9186754161/p244177.png)

  

* 进入 **话后处理** 状态时，将不会有新的电话接入，处理完毕后，点击 **`开始接听`** 即可。![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0286754161/p244178.png)

  




**三、第三方客户管理系统的开发** 

* 需要开发出一个客户详情页面，在第一步中配置的页面地址url，即为这个客户详情页的url，每次有新的呼入/呼出时，我们将刷新详情页，并且通过将相关参数拼接在url上，以http get请求的方式；

  

* 以天猫为例假如您填写的页面地址为：[https://www.tmall.com；那么每次呼入/呼出时，我们请求的url为：https://www.tmall.com?callNumber=18888888888\&calledNumber=057166666666\&callType=Inbound](https://www.tmall.com；那么每次呼入/呼出时，我们请求的url为：https://www.tmall.com?callNumber=18888888888&calledNumber=057166666666&callType=Inbound)

  




**四、参数说明** 


|     参数名称     |               描述                |
|--------------|---------------------------------|
| callNumber   | 主叫号码                            |
| calledNumber | 被叫号码                            |
| callType     | 电话类型：Inbound(呼入) / Outbound(呼出) |
| contactId    | 通话ID                            |


