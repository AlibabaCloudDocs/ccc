事件消息定义 
===========================



事件消息定义 
------------------------

消息分类 {#h2-u6D88u606Fu5206u7C7B1}
--------------------------------

已发布的事件消息分为四大类：通话事件、座席事件、呼叫中心事件、录音事件。

*** ** * ** ***

消息格式 {#h2-u6D88u606Fu683Cu5F0F2}
--------------------------------

**通话事件** 


|------|------------------|-----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 事件   | 说明               | 事件名称            | 消息字段                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 拨号   | 适用场景：外呼 ，双呼      | Dialing         | 时间            (EventTime)                         事件类型(EventType)                        话务ID(contactId)                        会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal                        主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)            坐席（可选）(agentId) ：1234@XXX                        技能组（可选）(skillGroupId)            实例 (instanceId)                                                                                |
| 呼叫振铃 | 适用场景：双呼 , 呼入     | Ringing         | 时间 (EventTime)            事件类型(EventType)                        话务ID(contactId)                        会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal                        主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)                        坐席（可选）(agentId) ：1235@XXX                        目的方 （destination) : agentId , 电话号码                        技能组（可选）(skillGroupId)                        实例 (instanceId)                      |
| 呼叫接通 | 适用场景：外呼 ，呼入，双呼   | CallEstablished | 时间 (EventTime)            事件类型(EventType)                        会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal                                    主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)                        话务ID(contactId)                        坐席（可选）(agentId) ：1236@XXX                        技能组（可选）(skillGroupId)                        实例 (instanceId)                                                                    |
| 呼叫结束 | 适用场景：外呼 ，双呼 , 呼入 | CallReleased    | 时间 (EventTime)            事件类型(EventType)                        会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal                        主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)                        话务ID(contactId)                        坐席（可选）(agentId) ：1237@XXX                        技能组（可选）(skillGroupId)                        挂断方 （initiator）：主/被叫号码                        挂断原因 （ releaseReason）            实例 (instanceId) |



**座席事件** 


|------|-------|---------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 事件   | 说明    | 事件名称          | 消息字段                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 签入   |       | AgentCheckIn  | 时间            (EventTime)                        事件类型(EventType)                        坐席 (agentId)                        技能组：(skillGroupIds)多个                        实例 (instanceId)                        结果 (result) ：0:成功、1:失败                        原因 (remark)（可选）                                                                                                                                                                                                                                                                                                                                                                    |
| 空闲   |       | AgentReady    | 时间            (EventTime)                        事件类型(EventType)                        坐席 (agentId)                        技能组：(skillGroupIds)多个                        实例 (instanceId)                        结果 (result) ：0:成功、1:失败                        原因 (remark)（可选）                                                                                                                                                                                                                                                                                                                                                                    |
| 坐席振铃 | 同呼叫振铃 | AgentRinging  | 时间            (EventTime)                        事件类型(EventType)                        坐席 (agentId)                        技能组：(skillGroupIds)多个                        实例 (instanceId)                        话务ID(contactId)                        会话 ID（connectId）            结果 (result) ：0:成功、1:失败                        原因 (remark)（可选）                                                                                                                                                                                                                                                                                                 |
| 坐席通话 |       | AgentTalk     | 时间            (EventTime)                        事件类型(EventType)                        坐席 (agentId)                        技能组：(skillGroupIds)多个                        实例 (instanceId)                        话务ID(contactId)                        会话 ID（connectId）            结果 (result) ：0:成功、1:失败                        原因 (remark)（可选）                                                                                                                                                                                                                                                                                                 |
| 直接转接 |       | BlindTransfer | 时间            (EventTime)                        事件类型(EventType)                        坐席 (agentId)                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal ,Call2RoutePoint            ,PredictiveDial                        主叫号码(caller)                        被叫号码(callee)                        技能组：(skillGroupIds)多个                        实例 (instanceId)                        话务ID(contactId)                        会话 ID（connectId）                        转接类型 （transferor）                        目的方 （destination)                        结果 (result) ：0:成功、1:失败                        原因 (remark)（可选） |
| 话后处理 |       | AgentACW      | 时间            (EventTime)                        事件类型(EventType)                        坐席 (agentId)                        技能组：(skillGroupIds)多个                        实例 (instanceId)                        话务ID(contactId)                        会话 ID（connectId）                                    结果 (result) ：0:成功、3:失败                        原因 (remark)（可选）                                                                                                                                                                                                                                                                         |
| 小休   |       | AgentBreak    | 时间            (EventTime)                        事件类型(EventType)                        坐席 (agentId)                        技能组：(skillGroupIds)多个                        实例 (instanceId)                        breakReason                        breakCode                        结果 (result) ：0:成功、1:失败                        原因 (remark)（可选）                                                                                                                                                                                                                                                                                                |
| 签出   |       | AgentCheckOut | 时间            (EventTime)                        事件类型(EventType)                        坐席 (agentId)                        技能组：(skillGroupIds)多个                        实例 (instanceId)                        结果 (result) ：0:成功、1:失败                        原因 (remark)（可选）                                                                                                                                                                                                                                                                                                                                                                    |



**呼叫中心事件** 


|--------|-----------------|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 事件     | 说明              | 事件名称            | 消息字段                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 进入IVR  |                 | Route2IVR       | 时间 (EventTime)                                    事件类型(EventType)                        会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal                        主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)                        话务ID(contactId)                        联系流ID(contactFlowId)                        联系流名称 (contactFlowName)                        实例 (instanceId)                                                                                                                     |
| 来话放弃   | IVR放弃、队列放弃、振铃放弃 | CallAbandoned   | 实例            (instanceId)                        事件类型(EventType)                        时间 (EventTime)                         会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal                        主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)                        话务ID(contactId)                        放弃阶段(abandonPhase) : IVR, Queuing, Ring                        联系流ID(contactFlowId) :IVR            技能组ID (skillGroupId) : Queuing                        坐席ID (agentId) :Ring ,Queuing |
| IVR转人工 | 队列、坐席           | Enqueue         | 实例            (instanceId)                        事件类型(EventType)                        时间 (EventTime)                         会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal                        主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)            话务ID(contactId)            联系流ID(contactFlowId)                         转接类型 （queueType）: SkillGroup            , Agent                        技能组ID (skillGroupId) : Queue                        坐席ID (agentId) : ,Agent                 |
| 排队超时   | 排队超时            | QueueingTimeout | 实例            (instanceId)                        事件类型(EventType)                        时间 (EventTime)                         会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal                        主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)            话务ID(contactId)                        队列类型 （queueType）: SkillGroup , Agent                        技能组ID (skillGroupId)  SkillGroup                        坐席ID (agentId)  Agent                                                           |
| 分配坐席   |                 | AssignAgent     | 实例            (instanceId)                        事件类型(EventType)                        时间 (EventTime)                         会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal                        主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)                                    话务ID(contactId)                        队列类型 （queueType）: SkillGroup , Agent                        技能组ID (skillGrou) SkillGroup                        坐席ID (agentId)  Agent                                       |
| 振铃超时   |                 | RingingTimeout  | 实例            (instanceId)                        事件类型(EventType)                        时间 (EventTime)                         会话 ID（connectId）                        呼叫类型(callType) :Inbound，Outbound , Back2Back ,Internal            主叫号码(caller)                        中间号码(broker)                        被叫号码(callee)            话务ID(contactId)            技能组ID (skillGrou) SkillGroup                        坐席ID (agentId)  Agent                                                                                                                                                   |



**录音事件** 


|--------|-------------|-------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 事件     | 说明          | 事件名称                    | 消息字段                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 通话详单生成 | 适用场景：获取通话数据 | CDRReady                | 事件时间(EventTime)                         事件类型(EventType)                   开始时间(StartTime)                       结束时间(EndTime)                   话务ID(ContactId)                        会话 ID(ConnectId)                        呼叫类型(CallType) :Inbound，Outbound , Back2Back ,Internal                        主叫号码(Caller)                        被叫号码(Callee)            坐席（可选）（AgentId)                        技能组，此处为技能组名称（可选）(SkillGroupIds)                    实例 (InstanceId) |
| 原始录音生成 | 适用场景：获取录音信息 | DualTrackRecordingReady | 事件时间(EventTime)                    事件类型(EventType)                    开始时间(StartTime)                        结束时间(EndTime)                    话务ID(ContactId)                    文件名称(FileName)                    下载地址(DownloadURL)                     录音时长(Duration)                   下载地址(旧)(Url)                      坐席（可选）（AgentId) 1234@XXX                      分片（可选）(segments)                  实例 (instanceId)                                                        |
| 录音生成   | 适用场景：获取录音信息 | RecordingReady          | 事件时间(EventTime)                    事件类型(EventType)                    开始时间(StartTime)                        结束时间(EndTime)                    话务ID(ContactId)                    文件名称(FileName)                    下载地址(DownloadURL)                     录音时长(Duration)                   下载地址(旧)(Url)                      坐席（可选）（AgentId) 1234@XXX                      分片（可选）(segments)                  实例 (instanceId)                                                        |


